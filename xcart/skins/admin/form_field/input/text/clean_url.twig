{##
 # Clean URL
 #}

<div>

  <div class="cleanurl-wrapper">
    {% if this.hasExtension() %}
      <div class="input-group">
        <input{{ this.getAttributesCode()|raw }}/>
        <span class="input-group-addon" data-extension="{{ this.getExtension() }}">.{{ this.getExtension() }}</span>
      </div>

    {% else %}
      <input{{ this.getAttributesCode()|raw }}/>
    {% endif %}
  </div>

{% if this.getErrorMessage() %}
  <div class="error inline-error">
    {{ this.getErrorMessage()|raw }}
    {% if this.hasConflict() %}
      {{ widget('XLite\\View\\ToolTip', text=this.getResolveHint(), caption=t('Resolve the conflict'), isImageTag='false', className='help-icon') }}
    {% endif %}
  </div>
{% endif %}

{% if this.isCleanURLDisabled() %}
  <div class="clean-url-disabled-info form-field-comment not-padded">
    {{ this.getDisabledCleanUrlComment()|raw }}
  </div>
{% endif %}

<div class="clean-url-result form-field-comment not-padded"
     data-saved-value="{{ this.getSavedValue() }}"
     data-url-template="{{ this.getFakeURL() }}">
  <span class="result-label">{{ t('Result') }}:</span>
  <span class="saved-url">
    {% if this.isCleanURLDisabled() %}
      {% if this.getURL() %}
        <span>{{ this.getURL() }}</span>
      {% endif %}
    {% else %}
      {% if this.getURL() %}
        <a href="{{ this.getURL() }}" target="_blank">{{ this.getURL() }}</a>
      {% endif %}
    {% endif %}
  </span>
  <span class="url"></span>
</div>

<div class="clean-url-result-autogenerated form-field-comment not-padded">
  {{ t('The clean URL will be generated automatically.') }}
</div>

{% if this.isHistoryConflict() %}
  <div class="additional-option form-field-comment not-padded">
    <input type="checkbox" name="{{ this.getNamePostedData('forceCleanURL') }}" value="1" id="forceCleanURLFlag"/>
    <label for="forceCleanURLFlag" class="note">
      <span class="force mark">{{ t('Assign entered Clean URL to this page anyway') }}</span>
    </label>
  </div>
{% endif %}

<div class="additional-option">
  <input type="checkbox" name="{{ this.getNamePostedData('autogenerateCleanURL') }}"
         value="1" {% if not this.getValue() %} checked="checked" {% endif %} id="autogenerateFlag"/>
  <label for="autogenerateFlag" class="note">{{ t('Autogenerate Clean URL') }}</label>
</div>

</div>
