function ShippingEstimateBox(base){var args=Array.prototype.slice.call(arguments,0);if(!base)args[0]='.estimator';this.bind('local.loaded',_.bind(this.triggerNeedCart,this));this.bind('local.preload',_.bind(this.collectShippingCost,this));this.bind('local.loaded',_.bind(this.checkShippingCost,this));this.callSupermethod('constructor',args);if(this.base.data('deferred'))this.load()};extend(ShippingEstimateBox,ALoadable);ShippingEstimateBox.prototype.shadeWidget=true;ShippingEstimateBox.prototype.updatePageTitle=false;ShippingEstimateBox.prototype.widgetTarget='cart';ShippingEstimateBox.prototype.widgetClass='XLite\\View\\ShippingEstimator\\ShippingEstimateBox';ShippingEstimateBox.prototype.triggerNeedCart=function(){core.trigger('reassignEstimator',this)};ShippingEstimateBox.prototype.getEventNamespace=function(){return'cart.shippingestimate'};ShippingEstimateBox.prototype.preloadShippingCost=0;ShippingEstimateBox.prototype.collectShippingCost=function(){if(this.base)this.preloadShippingCost=this.base.data('shipping-cost')};ShippingEstimateBox.prototype.checkShippingCost=function(){if(this.base){if(this.preloadShippingCost!==this.base.data('shipping-cost'))core.trigger('updateCart',this);this.collectShippingCost()}};core.autoload(ShippingEstimateBox)