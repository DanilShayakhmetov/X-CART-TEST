function SubscribeBlockView(base){var args=Array.prototype.slice.call(arguments,0);this.callSupermethod('constructor',args);var form=this.base?this.base.find('.subscription-form-block form').get(0):null;if(form)form.commonController.enableBackgroundSubmit(undefined,_.bind(function(event,result){if(result.isValid&&result.textStatus==='success'){this.processSuccess()}else this.processError()},this))};extend(SubscribeBlockView,ALoadable);SubscribeBlockView.autoload=function(){jQuery('.subscription-block').each(function(){new SubscribeBlockView(this)})};SubscribeBlockView.prototype.widgetTarget='newsletter_subscriptions';SubscribeBlockView.prototype.widgetClass='\\XLite\\Module\\XC\\NewsletterSubscriptions\\View\\SubscribeBlock';SubscribeBlockView.prototype.processSuccess=function(){this.base.find('.subscription-form-block').hide();this.base.find('.subscription-error-block').hide();this.base.find('.subscription-success-block').removeClass('hidden');this.base.find('.subscription-success-block').show()};SubscribeBlockView.prototype.processError=function(){this.base.find('.subscription-error-block').removeClass('hidden');this.base.find('.subscription-error-block').show()};SubscribeBlockView.prototype.getEventNamespace=function(){return'NewsletterSubscriptions'};core.autoload(SubscribeBlockView)